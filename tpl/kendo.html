<!DOCTYPE html>
<html>
<head>
<title>Batch editing</title>
<link href="/media/kendoui/styles/kendo.common.min.css" rel="stylesheet">
<link href="/media/kendoui/styles/kendo.default.min.css" rel="stylesheet">
<script src="/media/kendoui/js/jquery.min.js"></script>
<script src="/media/kendoui/js/kendo.web.min.js"></script>
</head>
<body>
<div id="grid"></div>
<script>

$(document).ready(function () {

  dataSource = new kendo.data.DataSource({
    pageSize: 10,
    autoSync: false,
    transport: {
      read: {
        url: '/api/notes/',
        dataType: 'json',
        type: 'GET'
      },
      create: {
        /*url: '/api/notes/',
        dataType: 'json',
        type: 'POST'*/
      },
      update: {
        url: '/api/notes/',
        dataType: 'json',
        type: 'POST',
        data: function() {
          var postData = JSON.stringify($('#grid').data().kendoGrid._data);
          $.post('/api/notes/', { data: postData });
        }
      },
      destroy: {
        url: '/api/notes/',
        dataType: 'json',
        type: 'DELETE',
								data: function() {
										console.log("delete data");
        }
      }
    },
    schema: {
      data: function(reply) { 
        return reply.rows;
      },
      model: {
        id: "id",
        fields: {
          id: {
            type: "string",
            editable: true,
            nullable: false
          },
          name: {
            type: "string",
            editable: true,
            nullable: false
          },
          author: {
            type: "string",
            editable: true,
            nullable: true
          },
        },
      },
    },
  });

  $("#grid").kendoGrid({
    dataSource: dataSource,
    navigatable: true,
    pageable: true,
    height: 500,
    editable: true,
    toolbar: [
      { 
        name: "create",
        text: "New"
      }, 
      { 
        name: "save",
        text: "Save" 
      }, 
      { 
        name: "cancel",
        text: "Cancel"
      }
    ],
    columns: [
      { field: "id", title: "ID", width: 150 },
      { field: "name", title: "Book", width: 150 },
      { field: "author", title: "Author", width: 100 },
      { command: "destroy", title: "&nbsp;", width: 110 }
    ],
  });

});

</script>
</div>
</body>
</html>
